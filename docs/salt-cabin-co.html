<!DOCTYPE html>
<html lang="en-US" xml:lang="en-US">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 6 Salt Cabin (CO) | DoD cloud2trees Demonstration: Forest Fuel Quantification for Wildfire Modeling using QUIC-Fire</title>
  <meta name="description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 6 Salt Cabin (CO) | DoD cloud2trees Demonstration: Forest Fuel Quantification for Wildfire Modeling using QUIC-Fire" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 6 Salt Cabin (CO) | DoD cloud2trees Demonstration: Forest Fuel Quantification for Wildfire Modeling using QUIC-Fire" />
  
  <meta name="twitter:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="George Woolsey, Wade Tinkham, Chad Hoffman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="fort-stewart-ga.html"/>
<link rel="next" href="cedar-bridge-nj.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script type="text/javascript">

// toggle visibility of R source blocks in R Markdown output
function toggle_R() {
  var x = document.getElementsByClassName('r');
  if (x.length == 0) return;
  function toggle_vis(o) {
    var d = o.style.display;
    o.style.display = (d == 'block' || d == '') ? 'none':'block';
  }

  for (i = 0; i < x.length; i++) {
    var y = x[i];
    if (y.tagName.toLowerCase() === 'pre') toggle_vis(y);
  }

    var elem = document.getElementById("myButton1");
    if (elem.value === "Hide Code") elem.value = "Show Code";
    else elem.value = "Hide Code";
}

document.write('<input onclick="toggle_R();" type="button" value="Hide Code" id="myButton1" style="position: absolute; top: 10%; right: 2%; z-index: 200"></input>')

</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Author Acknowledgement</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#objective"><i class="fa fa-check"></i><b>2.1</b> Objective</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#data_desc"><i class="fa fa-check"></i><b>2.2</b> Data</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#processing-workflow"><i class="fa fa-check"></i><b>2.3</b> Processing Workflow</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-preparation.html"><a href="data-preparation.html"><i class="fa fa-check"></i><b>3</b> Data Preparation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-preparation.html"><a href="data-preparation.html#study-sites"><i class="fa fa-check"></i><b>3.1</b> Study Sites</a></li>
<li class="chapter" data-level="3.2" data-path="data-preparation.html"><a href="data-preparation.html#point-cloud-data"><i class="fa fa-check"></i><b>3.2</b> Point Cloud Data</a></li>
<li class="chapter" data-level="3.3" data-path="data-preparation.html"><a href="data-preparation.html#itd-window-functions"><i class="fa fa-check"></i><b>3.3</b> ITD window functions</a></li>
<li class="chapter" data-level="3.4" data-path="data-preparation.html"><a href="data-preparation.html#other-plotting-functions"><i class="fa fa-check"></i><b>3.4</b> Other plotting functions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sycmarsh.html"><a href="sycmarsh.html"><i class="fa fa-check"></i><b>4</b> Sycan Marsh (OR)</a>
<ul>
<li class="chapter" data-level="4.1" data-path="sycmarsh.html"><a href="sycmarsh.html#sy_als"><i class="fa fa-check"></i><b>4.1</b> ALS Processing</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="sycmarsh.html"><a href="sycmarsh.html#itd-tuning"><i class="fa fa-check"></i><b>4.1.1</b> ITD tuning</a></li>
<li class="chapter" data-level="4.1.2" data-path="sycmarsh.html"><a href="sycmarsh.html#cloud2trees-point-cloud-processing"><i class="fa fa-check"></i><b>4.1.2</b> <code>cloud2trees</code> point cloud processing</a></li>
<li class="chapter" data-level="4.1.3" data-path="sycmarsh.html"><a href="sycmarsh.html#cloud2trees-results"><i class="fa fa-check"></i><b>4.1.3</b> <code>cloud2trees</code> Results</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="sycmarsh.html"><a href="sycmarsh.html#sy_uas"><i class="fa fa-check"></i><b>4.2</b> UAS lidar Processing</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="sycmarsh.html"><a href="sycmarsh.html#itd-tuning-1"><i class="fa fa-check"></i><b>4.2.1</b> ITD tuning</a></li>
<li class="chapter" data-level="4.2.2" data-path="sycmarsh.html"><a href="sycmarsh.html#cloud2trees-point-cloud-processing-1"><i class="fa fa-check"></i><b>4.2.2</b> <code>cloud2trees</code> point cloud processing</a></li>
<li class="chapter" data-level="4.2.3" data-path="sycmarsh.html"><a href="sycmarsh.html#cloud2trees-results-1"><i class="fa fa-check"></i><b>4.2.3</b> <code>cloud2trees</code> Results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="fort-stewart-ga.html"><a href="fort-stewart-ga.html"><i class="fa fa-check"></i><b>5</b> Fort Stewart (GA)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="fort-stewart-ga.html"><a href="fort-stewart-ga.html#als-2018-processing"><i class="fa fa-check"></i><b>5.1</b> ALS (2018) Processing</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="fort-stewart-ga.html"><a href="fort-stewart-ga.html#itd-tuning-2"><i class="fa fa-check"></i><b>5.1.1</b> ITD tuning</a></li>
<li class="chapter" data-level="5.1.2" data-path="fort-stewart-ga.html"><a href="fort-stewart-ga.html#cloud2trees-point-cloud-processing-2"><i class="fa fa-check"></i><b>5.1.2</b> <code>cloud2trees</code> point cloud processing</a></li>
<li class="chapter" data-level="5.1.3" data-path="fort-stewart-ga.html"><a href="fort-stewart-ga.html#cloud2trees-results-2"><i class="fa fa-check"></i><b>5.1.3</b> <code>cloud2trees</code> Results</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="fort-stewart-ga.html"><a href="fort-stewart-ga.html#als-2025-processing"><i class="fa fa-check"></i><b>5.2</b> ALS (2025) Processing</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="fort-stewart-ga.html"><a href="fort-stewart-ga.html#itd-tuning-3"><i class="fa fa-check"></i><b>5.2.1</b> ITD tuning</a></li>
<li class="chapter" data-level="5.2.2" data-path="fort-stewart-ga.html"><a href="fort-stewart-ga.html#cloud2trees-point-cloud-processing-3"><i class="fa fa-check"></i><b>5.2.2</b> <code>cloud2trees</code> point cloud processing</a></li>
<li class="chapter" data-level="5.2.3" data-path="fort-stewart-ga.html"><a href="fort-stewart-ga.html#cloud2trees-results-3"><i class="fa fa-check"></i><b>5.2.3</b> <code>cloud2trees</code> Results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="salt-cabin-co.html"><a href="salt-cabin-co.html"><i class="fa fa-check"></i><b>6</b> Salt Cabin (CO)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="salt-cabin-co.html"><a href="salt-cabin-co.html#sc_als"><i class="fa fa-check"></i><b>6.1</b> ALS Processing</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="salt-cabin-co.html"><a href="salt-cabin-co.html#itd-tuning-4"><i class="fa fa-check"></i><b>6.1.1</b> ITD tuning</a></li>
<li class="chapter" data-level="6.1.2" data-path="salt-cabin-co.html"><a href="salt-cabin-co.html#cloud2trees-point-cloud-processing-4"><i class="fa fa-check"></i><b>6.1.2</b> <code>cloud2trees</code> point cloud processing</a></li>
<li class="chapter" data-level="6.1.3" data-path="salt-cabin-co.html"><a href="salt-cabin-co.html#cloud2trees-results-4"><i class="fa fa-check"></i><b>6.1.3</b> <code>cloud2trees</code> Results</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="salt-cabin-co.html"><a href="salt-cabin-co.html#sc_uas"><i class="fa fa-check"></i><b>6.2</b> UAS sfm Processing</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="salt-cabin-co.html"><a href="salt-cabin-co.html#itd-tuning-5"><i class="fa fa-check"></i><b>6.2.1</b> ITD tuning</a></li>
<li class="chapter" data-level="6.2.2" data-path="salt-cabin-co.html"><a href="salt-cabin-co.html#cloud2trees-point-cloud-processing-5"><i class="fa fa-check"></i><b>6.2.2</b> <code>cloud2trees</code> point cloud processing</a></li>
<li class="chapter" data-level="6.2.3" data-path="salt-cabin-co.html"><a href="salt-cabin-co.html#cloud2trees-results-5"><i class="fa fa-check"></i><b>6.2.3</b> <code>cloud2trees</code> Results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="cedar-bridge-nj.html"><a href="cedar-bridge-nj.html"><i class="fa fa-check"></i><b>7</b> Cedar Bridge (NJ)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="cedar-bridge-nj.html"><a href="cedar-bridge-nj.html#als-processing"><i class="fa fa-check"></i><b>7.1</b> ALS Processing</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="cedar-bridge-nj.html"><a href="cedar-bridge-nj.html#itd-tuning-6"><i class="fa fa-check"></i><b>7.1.1</b> ITD tuning</a></li>
<li class="chapter" data-level="7.1.2" data-path="cedar-bridge-nj.html"><a href="cedar-bridge-nj.html#cloud2trees-point-cloud-processing-6"><i class="fa fa-check"></i><b>7.1.2</b> <code>cloud2trees</code> point cloud processing</a></li>
<li class="chapter" data-level="7.1.3" data-path="cedar-bridge-nj.html"><a href="cedar-bridge-nj.html#cloud2trees-results-6"><i class="fa fa-check"></i><b>7.1.3</b> <code>cloud2trees</code> Results</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="cedar-bridge-nj.html"><a href="cedar-bridge-nj.html#uas-lidar-processing"><i class="fa fa-check"></i><b>7.2</b> UAS lidar Processing</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="cedar-bridge-nj.html"><a href="cedar-bridge-nj.html#itd-tuning-7"><i class="fa fa-check"></i><b>7.2.1</b> ITD tuning</a></li>
<li class="chapter" data-level="7.2.2" data-path="cedar-bridge-nj.html"><a href="cedar-bridge-nj.html#cloud2trees-point-cloud-processing-7"><i class="fa fa-check"></i><b>7.2.2</b> <code>cloud2trees</code> point cloud processing</a></li>
<li class="chapter" data-level="7.2.3" data-path="cedar-bridge-nj.html"><a href="cedar-bridge-nj.html#cloud2trees-results-7"><i class="fa fa-check"></i><b>7.2.3</b> <code>cloud2trees</code> Results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="point-cloud-processing-results.html"><a href="point-cloud-processing-results.html"><i class="fa fa-check"></i><b>8</b> Point Cloud Processing Results</a>
<ul>
<li class="chapter" data-level="8.1" data-path="point-cloud-processing-results.html"><a href="point-cloud-processing-results.html#processing-time"><i class="fa fa-check"></i><b>8.1</b> Processing Time</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="point-cloud-processing-results.html"><a href="point-cloud-processing-results.html#point-cloud-processing-time-versus-point-density"><i class="fa fa-check"></i><b>8.1.1</b> Point Cloud Processing Time versus Point Density</a></li>
<li class="chapter" data-level="8.1.2" data-path="point-cloud-processing-results.html"><a href="point-cloud-processing-results.html#point-cloud-processing-time-by-section"><i class="fa fa-check"></i><b>8.1.2</b> Point Cloud Processing Time by Section (%)</a></li>
<li class="chapter" data-level="8.1.3" data-path="point-cloud-processing-results.html"><a href="point-cloud-processing-results.html#point-cloud-processing-time-by-section-total"><i class="fa fa-check"></i><b>8.1.3</b> Point Cloud Processing Time by Section (total)</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="point-cloud-processing-results.html"><a href="point-cloud-processing-results.html#silvicultural-metrics"><i class="fa fa-check"></i><b>8.2</b> Silvicultural Metrics</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="point-cloud-processing-results.html"><a href="point-cloud-processing-results.html#example"><i class="fa fa-check"></i><b>8.2.1</b> Example</a></li>
<li class="chapter" data-level="8.2.2" data-path="point-cloud-processing-results.html"><a href="point-cloud-processing-results.html#study-area-summaries"><i class="fa fa-check"></i><b>8.2.2</b> Study Area Summaries</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lanl_trees.html"><a href="lanl_trees.html"><i class="fa fa-check"></i><b>9</b> <code>cloud2trees</code> to LANL TREES</a>
<ul>
<li class="chapter" data-level="9.1" data-path="lanl_trees.html"><a href="lanl_trees.html#surface-fuel-quantification"><i class="fa fa-check"></i><b>9.1</b> Surface Fuel Quantification</a></li>
<li class="chapter" data-level="9.2" data-path="lanl_trees.html"><a href="lanl_trees.html#cloud2treescloud2trees_to_lanl_trees-example-process"><i class="fa fa-check"></i><b>9.2</b> <code>cloud2trees::cloud2trees_to_lanl_trees()</code> example process</a></li>
<li class="chapter" data-level="9.3" data-path="lanl_trees.html"><a href="lanl_trees.html#cloud2treescloud2trees_to_lanl_trees-everything"><i class="fa fa-check"></i><b>9.3</b> <code>cloud2trees::cloud2trees_to_lanl_trees()</code> everything</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="d-fuel-structures.html"><a href="d-fuel-structures.html"><i class="fa fa-check"></i><b>10</b> 3D Fuel Structures</a>
<ul>
<li class="chapter" data-level="10.1" data-path="d-fuel-structures.html"><a href="d-fuel-structures.html#salt-cabin-co---als"><i class="fa fa-check"></i><b>10.1</b> Salt Cabin (CO) - ALS</a></li>
<li class="chapter" data-level="10.2" data-path="d-fuel-structures.html"><a href="d-fuel-structures.html#salt-cabin-co---uas-sfm"><i class="fa fa-check"></i><b>10.2</b> Salt Cabin (CO) - UAS-SfM</a></li>
<li class="chapter" data-level="10.3" data-path="d-fuel-structures.html"><a href="d-fuel-structures.html#sycan-marsh-or---als"><i class="fa fa-check"></i><b>10.3</b> Sycan Marsh (OR) - ALS</a></li>
<li class="chapter" data-level="10.4" data-path="d-fuel-structures.html"><a href="d-fuel-structures.html#sycan-marsh-or---uas-lidar"><i class="fa fa-check"></i><b>10.4</b> Sycan Marsh (OR) - UAS-lidar</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="lessons-learned.html"><a href="lessons-learned.html"><i class="fa fa-check"></i><b>11</b> Lessons Learned</a>
<ul>
<li class="chapter" data-level="11.1" data-path="lessons-learned.html"><a href="lessons-learned.html#data-processing-challengesgaps"><i class="fa fa-check"></i><b>11.1</b> Data Processing Challenges/Gaps</a></li>
<li class="chapter" data-level="11.2" data-path="lessons-learned.html"><a href="lessons-learned.html#challenges-with-these-demos"><i class="fa fa-check"></i><b>11.2</b> Challenges with these Demos</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DoD cloud2trees Demonstration: Forest Fuel Quantification for Wildfire Modeling using QUIC-Fire</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="salt-cabin-co" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Section 6</span> Salt Cabin (CO)<a href="salt-cabin-co.html#salt-cabin-co" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>process the point cloud data for the Salt Cabin (CO) study site</p>
<p>let’s check out the data we have and the area</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="salt-cabin-co.html#cb70-1" tabindex="-1"></a><span class="co"># just get the data we care about</span></span>
<span id="cb70-2"><a href="salt-cabin-co.html#cb70-2" tabindex="-1"></a>aoi_study_site <span class="ot">&lt;-</span> <span class="st">&quot;SaltCabin&quot;</span></span>
<span id="cb70-3"><a href="salt-cabin-co.html#cb70-3" tabindex="-1"></a>aoi_sf <span class="ot">&lt;-</span> study_sites_sf <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(study_site <span class="sc">==</span> aoi_study_site)</span>
<span id="cb70-4"><a href="salt-cabin-co.html#cb70-4" tabindex="-1"></a>aoi_las_ctg <span class="ot">&lt;-</span> study_sites_las_ctg <span class="sc">%&gt;%</span> </span>
<span id="cb70-5"><a href="salt-cabin-co.html#cb70-5" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">keep_at</span>(</span>
<span id="cb70-6"><a href="salt-cabin-co.html#cb70-6" tabindex="-1"></a>    <span class="fu">names</span>(study_sites_las_ctg)[</span>
<span id="cb70-7"><a href="salt-cabin-co.html#cb70-7" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">names</span>(study_sites_las_ctg), aoi_study_site)</span>
<span id="cb70-8"><a href="salt-cabin-co.html#cb70-8" tabindex="-1"></a>    ]</span>
<span id="cb70-9"><a href="salt-cabin-co.html#cb70-9" tabindex="-1"></a>  )</span>
<span id="cb70-10"><a href="salt-cabin-co.html#cb70-10" tabindex="-1"></a><span class="co"># option to put satellite imagery as base layer of mapview maps</span></span>
<span id="cb70-11"><a href="salt-cabin-co.html#cb70-11" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">mapviewOptions</span>(</span>
<span id="cb70-12"><a href="salt-cabin-co.html#cb70-12" tabindex="-1"></a>  <span class="at">homebutton =</span> <span class="cn">FALSE</span></span>
<span id="cb70-13"><a href="salt-cabin-co.html#cb70-13" tabindex="-1"></a>  , <span class="at">basemaps =</span> <span class="fu">c</span>(<span class="st">&quot;Esri.WorldImagery&quot;</span>,<span class="st">&quot;OpenStreetMap&quot;</span>)</span>
<span id="cb70-14"><a href="salt-cabin-co.html#cb70-14" tabindex="-1"></a>)</span>
<span id="cb70-15"><a href="salt-cabin-co.html#cb70-15" tabindex="-1"></a><span class="co"># map it</span></span>
<span id="cb70-16"><a href="salt-cabin-co.html#cb70-16" tabindex="-1"></a><span class="co"># add the study bounds</span></span>
<span id="cb70-17"><a href="salt-cabin-co.html#cb70-17" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">mapview</span>(</span>
<span id="cb70-18"><a href="salt-cabin-co.html#cb70-18" tabindex="-1"></a>  aoi_las_ctg[[<span class="st">&quot;SaltCabin_als_2021&quot;</span>]]<span class="sc">@</span>data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(filename)</span>
<span id="cb70-19"><a href="salt-cabin-co.html#cb70-19" tabindex="-1"></a>  , <span class="at">color =</span> <span class="st">&quot;black&quot;</span></span>
<span id="cb70-20"><a href="salt-cabin-co.html#cb70-20" tabindex="-1"></a>  , <span class="at">lwd =</span> <span class="dv">2</span></span>
<span id="cb70-21"><a href="salt-cabin-co.html#cb70-21" tabindex="-1"></a>  , <span class="at">alpha.regions =</span> <span class="dv">0</span></span>
<span id="cb70-22"><a href="salt-cabin-co.html#cb70-22" tabindex="-1"></a>  , <span class="at">layer.name =</span> <span class="fu">names</span>(aoi_las_ctg[<span class="dv">1</span>])</span>
<span id="cb70-23"><a href="salt-cabin-co.html#cb70-23" tabindex="-1"></a>  , <span class="at">legend =</span> F</span>
<span id="cb70-24"><a href="salt-cabin-co.html#cb70-24" tabindex="-1"></a>  , <span class="at">popup =</span> F</span>
<span id="cb70-25"><a href="salt-cabin-co.html#cb70-25" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb70-26"><a href="salt-cabin-co.html#cb70-26" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">mapview</span>(</span>
<span id="cb70-27"><a href="salt-cabin-co.html#cb70-27" tabindex="-1"></a>  aoi_las_ctg[[<span class="dv">2</span>]]<span class="sc">$</span>geometry</span>
<span id="cb70-28"><a href="salt-cabin-co.html#cb70-28" tabindex="-1"></a>  , <span class="at">color =</span> <span class="st">&quot;gray&quot;</span></span>
<span id="cb70-29"><a href="salt-cabin-co.html#cb70-29" tabindex="-1"></a>  , <span class="at">lwd =</span> <span class="dv">2</span></span>
<span id="cb70-30"><a href="salt-cabin-co.html#cb70-30" tabindex="-1"></a>  , <span class="at">alpha.regions =</span> <span class="dv">0</span></span>
<span id="cb70-31"><a href="salt-cabin-co.html#cb70-31" tabindex="-1"></a>  , <span class="at">layer.name =</span> <span class="fu">names</span>(aoi_las_ctg[<span class="dv">2</span>])</span>
<span id="cb70-32"><a href="salt-cabin-co.html#cb70-32" tabindex="-1"></a>  , <span class="at">legend =</span> F</span>
<span id="cb70-33"><a href="salt-cabin-co.html#cb70-33" tabindex="-1"></a>  , <span class="at">popup =</span> F</span>
<span id="cb70-34"><a href="salt-cabin-co.html#cb70-34" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb70-35"><a href="salt-cabin-co.html#cb70-35" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">mapview</span>(</span>
<span id="cb70-36"><a href="salt-cabin-co.html#cb70-36" tabindex="-1"></a>  aoi_sf</span>
<span id="cb70-37"><a href="salt-cabin-co.html#cb70-37" tabindex="-1"></a>  , <span class="at">zcol =</span> <span class="st">&quot;study_site_lab&quot;</span></span>
<span id="cb70-38"><a href="salt-cabin-co.html#cb70-38" tabindex="-1"></a>  , <span class="at">color =</span> <span class="st">&quot;navy&quot;</span></span>
<span id="cb70-39"><a href="salt-cabin-co.html#cb70-39" tabindex="-1"></a>  , <span class="at">lwd =</span> <span class="dv">2</span></span>
<span id="cb70-40"><a href="salt-cabin-co.html#cb70-40" tabindex="-1"></a>  , <span class="at">alpha.regions =</span> <span class="dv">0</span></span>
<span id="cb70-41"><a href="salt-cabin-co.html#cb70-41" tabindex="-1"></a>  , <span class="at">legend =</span> T</span>
<span id="cb70-42"><a href="salt-cabin-co.html#cb70-42" tabindex="-1"></a>  , <span class="at">popup =</span> F</span>
<span id="cb70-43"><a href="salt-cabin-co.html#cb70-43" tabindex="-1"></a>)</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-66d5c0a61689d62d7173" style="width:1008px;height:672px;"></div>
<script type="application/json" data-for="htmlwidget-66d5c0a61689d62d7173">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[-105.571909130032,-105.5739253469786,-105.5541538071034,-105.5521416976303,-105.571909130032],"lat":[40.66335244886194,40.67828312097246,40.67977733232815,40.66484633083904,40.66335244886194]}]],[[{"lng":[-105.5539948134647,-105.5560073106532,-105.5362372443382,-105.5342288546381,-105.5539948134647],"lat":[40.66336077944602,40.67829203792064,40.67978331977839,40.66485173255793,40.66336077944602]}]]],null,"SaltCabin_als_2021",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#000000","weight":2,"opacity":[0.9,0.9],"fill":true,"fillColor":["#4B0055","#FDE333"],"fillOpacity":[0,0],"smoothFactor":1,"noClip":false},null,{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["../data/saltcabin/als_2021/USGS_LPC_CO_CameronPeakWildfire_2021_D21_w2980n1485_reproj.las","../data/saltcabin/als_2021/USGS_LPC_CO_CameronPeakWildfire_2021_D21_w2985n1485_reproj.las"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":3,"opacity":0.9,"fillOpacity":0,"bringToFront":false,"sendToBack":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addPolygons","args":[[[[{"lng":[-105.5497094577763,-105.5497436962779,-105.542619078646,-105.5425852838182,-105.5497094577763],"lat":[40.66735904329374,40.67152830717134,40.67156200977085,40.6673927409647,40.66735904329374]}]]],null,"SaltCabin_uas_sfm_2024",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"gray","weight":2,"opacity":0.9,"fill":true,"fillColor":"#6666ff","fillOpacity":0,"smoothFactor":1,"noClip":false},null,{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":3,"opacity":0.9,"fillOpacity":0,"bringToFront":false,"sendToBack":false}]},{"method":"addPolygons","args":[[[[{"lng":[-105.5484641258779,-105.5483301719728,-105.5482366666672,-105.5481544281888,-105.5480376286025,-105.5478748197758,-105.5477298532438,-105.5475506869272,-105.5474584858638,-105.5473368493287,-105.5471337714803,-105.5469594770934,-105.5467496438394,-105.5466385150167,-105.5464463432072,-105.5462197896522,-105.5458829023802,-105.5457317219884,-105.5455396226803,-105.5453941487462,-105.5451733010677,-105.5449410763297,-105.5447958546309,-105.5446212354704,-105.5444580296153,-105.5442887213691,-105.5441719250375,-105.5440204931216,-105.5438287906858,-105.5436951623818,-105.5436314532764,-105.5436249554974,-105.5437229048738,-105.5437917809561,-105.5438370387822,-105.5439286690375,-105.5440083459023,-105.5440708305695,-105.544080948282,-105.5440275022453,-105.5439971704806,-105.5440366845343,-105.5440478457273,-105.5439592975527,-105.5439112710583,-105.5438281784514,-105.5437806560955,-105.5438027628862,-105.5438368580266,-105.5438418092181,-105.5442895526673,-105.5445568341883,-105.5450166387821,-105.545312162602,-105.5455786495788,-105.5458748210603,-105.5462582074421,-105.5464904563277,-105.5467236449993,-105.5470799488544,-105.5474023459266,-105.5477066145433,-105.5479167308859,-105.5480349766735,-105.5479964500773,-105.5480328229652,-105.5481560510754,-105.5484362352301,-105.5485430369213,-105.5486488597037,-105.5487897880609,-105.5488431355043,-105.5487924377269,-105.5486188709313,-105.5485503656026,-105.5484641258779],"lat":[40.67098878370786,40.67096285521139,40.67090574232541,40.670804301328,40.67074287141148,40.67074364406906,40.67079303385905,40.67092670729498,40.67102897595706,40.67108710954038,40.67114120149405,40.67115973710618,40.6710987465686,40.67101957856679,40.67098506858588,40.67101270530719,40.67105857309641,40.67105928775506,40.67103363083131,40.67102103572112,40.67103536107292,40.67108073188256,40.67109912701165,40.67107781353409,40.67102988124425,40.67094655785055,40.67088512400377,40.67085484542119,40.67087788578361,40.67089179746748,40.67092308963454,40.67083899858181,40.6707278509886,40.67061684024153,40.67046166614522,40.67028856375883,40.67007567051483,40.66989385041234,40.66970784959074,40.6695708502921,40.66941603224058,40.66926974001006,40.66921213048858,40.66904873179989,40.66886300487617,40.66865530580873,40.66853156083857,40.66838977810233,40.66829221346368,40.66818593117387,40.66818824884767,40.66816485129483,40.66822023874829,40.66809487462221,40.6679740744025,40.66792840000197,40.6678823122596,40.66784136613888,40.66791552898374,40.668113076876,40.6684303257404,40.66866353800826,40.66875994514998,40.66899846659458,40.66926429680667,40.6694456498564,40.6695823160209,40.6697138091711,40.66997452168426,40.67011569745099,40.67028327099468,40.67040698615853,40.67060646260242,40.67071354635328,40.67086883274875,40.67098878370786]}]]],null,"aoi_sf - study_site_lab",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#000080","weight":2,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0,"smoothFactor":1,"noClip":false},null,{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"Salt Cabin (CO)",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":3,"opacity":0.9,"fillOpacity":0,"bringToFront":false,"sendToBack":false}]},{"method":"addLayersControl","args":[["Esri.WorldImagery","OpenStreetMap"],["SaltCabin_als_2021","SaltCabin_uas_sfm_2024","aoi_sf - study_site_lab"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["Salt Cabin (CO)"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"aoi_sf - study_site_lab"}]},{"method":"addHomeButton","args":[-105.5739253469786,40.66335244886194,-105.5342288546381,40.67978331977839,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[40.66335244886194,40.67978331977839],"lng":[-105.5739253469786,-105.5342288546381]},"fitBounds":[40.66335244886194,-105.5739253469786,40.67978331977839,-105.5342288546381,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\"position\":\"relative\",\"bottomleft\":\"0px\",\"background-color\":\"rgba(255, 255, 255, 0.7)\",\"box-shadow\":\"0 0 2px #bbb\",\"background-clip\":\"padding-box\",\"margin\":\"0\",\"padding-left\":\"5px\",\"padding-right\":\"5px\",\"color\":\"#333\",\"font-size\":\"9px\",\"font-family\":\"\\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif\",\"text-align\":\"left\",\"z-index\":\"700\"});\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p>point cloud data summary</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="salt-cabin-co.html#cb71-1" tabindex="-1"></a>aoi_las_ctg</span></code></pre></div>
<pre><code>## $SaltCabin_als_2021
## class       : LAScatalog (v1.4 format 0)
## extent      : -801159, -797999, 2001522, 2003352 (xmin, xmax, ymin, ymax)
## coord. ref. : NAD83 / Conus Albers 
## area        : 5.6 km²
## points      : 35.22 million points
## type        : airborne
## density     : 6.3 points/m²
## density     : 6.3 pulses/m²
## num. files  : 2 
## 
## $SaltCabin_uas_sfm_2024
## class       : LAScatalog (v1.2 format 3)
## extent      : 453536.8, 454139, 4501977, 4502440 (xmin, xmax, ymin, ymax)
## coord. ref. : WGS 84 / UTM zone 13N 
## area        : 278704 m²
## points      : 94.51 million points
## type        : terrestrial
## density     : 339.1 points/m²
## num. files  : 1</code></pre>
<div id="sc_als" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> ALS Processing<a href="salt-cabin-co.html#sc_als" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="itd-tuning-4" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> ITD tuning<a href="salt-cabin-co.html#itd-tuning-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>put las files in a list</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="salt-cabin-co.html#cb73-1" tabindex="-1"></a><span class="co"># list of all las files</span></span>
<span id="cb73-2"><a href="salt-cabin-co.html#cb73-2" tabindex="-1"></a>las_flist_temp <span class="ot">&lt;-</span></span>
<span id="cb73-3"><a href="salt-cabin-co.html#cb73-3" tabindex="-1"></a>  aoi_las_ctg[[<span class="st">&quot;SaltCabin_als_2021&quot;</span>]] <span class="sc">%&gt;%</span> </span>
<span id="cb73-4"><a href="salt-cabin-co.html#cb73-4" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">pluck</span>(<span class="st">&quot;data&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb73-5"><a href="salt-cabin-co.html#cb73-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(filename,<span class="st">&quot;USGS_LPC_CO_CameronPeakWildfire_2021_D21_w2985n1485_reproj&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-6"><a href="salt-cabin-co.html#cb73-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(filename)</span></code></pre></div>
<p>run tuning</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="salt-cabin-co.html#cb74-1" tabindex="-1"></a><span class="co"># if there is an error with tuning...is it because there are no trees for a given ws_fn?</span></span>
<span id="cb74-2"><a href="salt-cabin-co.html#cb74-2" tabindex="-1"></a>    <span class="co"># Caused by error in `dplyr::group_by()`:</span></span>
<span id="cb74-3"><a href="salt-cabin-co.html#cb74-3" tabindex="-1"></a>    <span class="co"># ! Must group by variables found in `.data`.</span></span>
<span id="cb74-4"><a href="salt-cabin-co.html#cb74-4" tabindex="-1"></a>    <span class="co"># Column `ws_fn` is not found.</span></span>
<span id="cb74-5"><a href="salt-cabin-co.html#cb74-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(<span class="st">&quot;../data/itd_tuning_SaltCabin_als.jpg&quot;</span>)){</span>
<span id="cb74-6"><a href="salt-cabin-co.html#cb74-6" tabindex="-1"></a>  <span class="co"># tuning</span></span>
<span id="cb74-7"><a href="salt-cabin-co.html#cb74-7" tabindex="-1"></a>  itd_tuning_ans <span class="ot">&lt;-</span> cloud2trees<span class="sc">::</span><span class="fu">itd_tuning</span>(</span>
<span id="cb74-8"><a href="salt-cabin-co.html#cb74-8" tabindex="-1"></a>      <span class="at">input_las_dir =</span> las_flist_temp</span>
<span id="cb74-9"><a href="salt-cabin-co.html#cb74-9" tabindex="-1"></a>      , <span class="at">n_samples =</span> <span class="dv">3</span></span>
<span id="cb74-10"><a href="salt-cabin-co.html#cb74-10" tabindex="-1"></a>      , <span class="at">ws_fn_list =</span> my_ws_functions</span>
<span id="cb74-11"><a href="salt-cabin-co.html#cb74-11" tabindex="-1"></a>      , <span class="at">chm_res_m =</span> <span class="fl">0.25</span></span>
<span id="cb74-12"><a href="salt-cabin-co.html#cb74-12" tabindex="-1"></a>    )</span>
<span id="cb74-13"><a href="salt-cabin-co.html#cb74-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb74-14"><a href="salt-cabin-co.html#cb74-14" tabindex="-1"></a>    <span class="st">&quot;../data/itd_tuning_SaltCabin_als.jpg&quot;</span></span>
<span id="cb74-15"><a href="salt-cabin-co.html#cb74-15" tabindex="-1"></a>    , <span class="at">plot =</span> itd_tuning_ans<span class="sc">$</span>plot_samples</span>
<span id="cb74-16"><a href="salt-cabin-co.html#cb74-16" tabindex="-1"></a>    , <span class="at">dpi =</span> <span class="st">&quot;print&quot;</span></span>
<span id="cb74-17"><a href="salt-cabin-co.html#cb74-17" tabindex="-1"></a>    , <span class="at">height =</span> <span class="fl">7.5</span>, <span class="at">width =</span> <span class="dv">10</span></span>
<span id="cb74-18"><a href="salt-cabin-co.html#cb74-18" tabindex="-1"></a>  )</span>
<span id="cb74-19"><a href="salt-cabin-co.html#cb74-19" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="https://i.ibb.co/Zpqmpm62/itd-tuning-Salt-Cabin-als.jpg" width="100%" height="100%" style="display: block; margin: auto;" /></p>
<p>pick the best function for use in ITD</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="salt-cabin-co.html#cb75-1" tabindex="-1"></a><span class="co"># pick the best function for use in ITD</span></span>
<span id="cb75-2"><a href="salt-cabin-co.html#cb75-2" tabindex="-1"></a>best_ws_fn_temp <span class="ot">&lt;-</span> my_ws_functions<span class="sc">$</span>log_les_ccv_fn</span></code></pre></div>
</div>
<div id="cloud2trees-point-cloud-processing-4" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> <code>cloud2trees</code> point cloud processing<a href="salt-cabin-co.html#cloud2trees-point-cloud-processing-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="salt-cabin-co.html#cb76-1" tabindex="-1"></a>dir_temp <span class="ot">&lt;-</span> <span class="fu">file.path</span>(aoi_sf<span class="sc">$</span>fdir, <span class="st">&quot;als_2021_processing&quot;</span>)</span>
<span id="cb76-2"><a href="salt-cabin-co.html#cb76-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">dir.exists</span>(dir_temp)){</span>
<span id="cb76-3"><a href="salt-cabin-co.html#cb76-3" tabindex="-1"></a>  <span class="fu">dir.create</span>(dir_temp)</span>
<span id="cb76-4"><a href="salt-cabin-co.html#cb76-4" tabindex="-1"></a><span class="co"># c2t</span></span>
<span id="cb76-5"><a href="salt-cabin-co.html#cb76-5" tabindex="-1"></a>  cloud2trees_ans <span class="ot">&lt;-</span> cloud2trees<span class="sc">::</span><span class="fu">cloud2trees</span>(</span>
<span id="cb76-6"><a href="salt-cabin-co.html#cb76-6" tabindex="-1"></a>    <span class="at">input_las_dir =</span> las_flist_temp</span>
<span id="cb76-7"><a href="salt-cabin-co.html#cb76-7" tabindex="-1"></a>    , <span class="at">output_dir =</span> dir_temp</span>
<span id="cb76-8"><a href="salt-cabin-co.html#cb76-8" tabindex="-1"></a>    , <span class="at">ws =</span> best_ws_fn_temp</span>
<span id="cb76-9"><a href="salt-cabin-co.html#cb76-9" tabindex="-1"></a>    , <span class="at">dtm_res_m =</span> <span class="dv">1</span></span>
<span id="cb76-10"><a href="salt-cabin-co.html#cb76-10" tabindex="-1"></a>    , <span class="at">chm_res_m =</span> <span class="fl">0.25</span></span>
<span id="cb76-11"><a href="salt-cabin-co.html#cb76-11" tabindex="-1"></a>    , <span class="at">estimate_tree_dbh =</span> T</span>
<span id="cb76-12"><a href="salt-cabin-co.html#cb76-12" tabindex="-1"></a>    , <span class="at">estimate_tree_type =</span> T</span>
<span id="cb76-13"><a href="salt-cabin-co.html#cb76-13" tabindex="-1"></a>    <span class="co"># hmd</span></span>
<span id="cb76-14"><a href="salt-cabin-co.html#cb76-14" tabindex="-1"></a>    , <span class="at">estimate_tree_hmd =</span> T</span>
<span id="cb76-15"><a href="salt-cabin-co.html#cb76-15" tabindex="-1"></a>    , <span class="at">hmd_tree_sample_prop =</span> <span class="fl">0.5</span></span>
<span id="cb76-16"><a href="salt-cabin-co.html#cb76-16" tabindex="-1"></a>    , <span class="at">hmd_estimate_missing_hmd =</span> T</span>
<span id="cb76-17"><a href="salt-cabin-co.html#cb76-17" tabindex="-1"></a>    <span class="co"># biomass</span></span>
<span id="cb76-18"><a href="salt-cabin-co.html#cb76-18" tabindex="-1"></a>    , <span class="at">estimate_biomass_method =</span> <span class="fu">c</span>(<span class="st">&quot;landfire&quot;</span>,<span class="st">&quot;cruz&quot;</span>)</span>
<span id="cb76-19"><a href="salt-cabin-co.html#cb76-19" tabindex="-1"></a>    <span class="co"># cbh</span></span>
<span id="cb76-20"><a href="salt-cabin-co.html#cb76-20" tabindex="-1"></a>    , <span class="at">estimate_tree_cbh =</span> T</span>
<span id="cb76-21"><a href="salt-cabin-co.html#cb76-21" tabindex="-1"></a>    , <span class="at">cbh_tree_sample_prop =</span> <span class="fl">0.5</span></span>
<span id="cb76-22"><a href="salt-cabin-co.html#cb76-22" tabindex="-1"></a>    , <span class="at">cbh_estimate_missing_cbh =</span> T</span>
<span id="cb76-23"><a href="salt-cabin-co.html#cb76-23" tabindex="-1"></a>  )</span>
<span id="cb76-24"><a href="salt-cabin-co.html#cb76-24" tabindex="-1"></a>  <span class="co"># add foresttype</span></span>
<span id="cb76-25"><a href="salt-cabin-co.html#cb76-25" tabindex="-1"></a>  cloud2trees_ans<span class="sc">$</span>foresttype_rast <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>( <span class="fu">file.path</span>(dir_temp, <span class="st">&quot;point_cloud_processing_delivery&quot;</span>, <span class="st">&quot;fia_foresttype_raster.tif&quot;</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb76-26"><a href="salt-cabin-co.html#cb76-26" tabindex="-1"></a>    terra<span class="sc">::</span><span class="fu">subst</span>(<span class="at">from =</span> foresttype_lookup<span class="sc">$</span>forest_type_group_code, <span class="at">to =</span> foresttype_lookup<span class="sc">$</span>forest_type_group)</span>
<span id="cb76-27"><a href="salt-cabin-co.html#cb76-27" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb76-28"><a href="salt-cabin-co.html#cb76-28" tabindex="-1"></a>  cloud2trees_ans <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb76-29"><a href="salt-cabin-co.html#cb76-29" tabindex="-1"></a>    <span class="st">&quot;dtm_rast&quot;</span> <span class="ot">=</span> terra<span class="sc">::</span><span class="fu">rast</span>( <span class="fu">file.path</span>(dir_temp, <span class="st">&quot;point_cloud_processing_delivery&quot;</span>, <span class="st">&quot;dtm_1m.tif&quot;</span>) )</span>
<span id="cb76-30"><a href="salt-cabin-co.html#cb76-30" tabindex="-1"></a>    , <span class="st">&quot;chm_rast&quot;</span> <span class="ot">=</span> terra<span class="sc">::</span><span class="fu">rast</span>( <span class="fu">file.path</span>(dir_temp, <span class="st">&quot;point_cloud_processing_delivery&quot;</span>, <span class="st">&quot;chm_0.25m.tif&quot;</span>) )</span>
<span id="cb76-31"><a href="salt-cabin-co.html#cb76-31" tabindex="-1"></a>    , <span class="st">&quot;crowns_sf&quot;</span> <span class="ot">=</span> <span class="fu">list.files</span>(</span>
<span id="cb76-32"><a href="salt-cabin-co.html#cb76-32" tabindex="-1"></a>        <span class="fu">file.path</span>(dir_temp, <span class="st">&quot;point_cloud_processing_delivery&quot;</span>)</span>
<span id="cb76-33"><a href="salt-cabin-co.html#cb76-33" tabindex="-1"></a>        , <span class="at">pattern =</span> <span class="st">&quot;final_detected_crowns.*</span><span class="sc">\\</span><span class="st">.gpkg$&quot;</span></span>
<span id="cb76-34"><a href="salt-cabin-co.html#cb76-34" tabindex="-1"></a>        , <span class="at">full.names =</span> T</span>
<span id="cb76-35"><a href="salt-cabin-co.html#cb76-35" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb76-36"><a href="salt-cabin-co.html#cb76-36" tabindex="-1"></a>      <span class="fu">normalizePath</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb76-37"><a href="salt-cabin-co.html#cb76-37" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">map</span>(\(x)</span>
<span id="cb76-38"><a href="salt-cabin-co.html#cb76-38" tabindex="-1"></a>        sf<span class="sc">::</span><span class="fu">st_read</span>(</span>
<span id="cb76-39"><a href="salt-cabin-co.html#cb76-39" tabindex="-1"></a>          <span class="at">dsn =</span> x</span>
<span id="cb76-40"><a href="salt-cabin-co.html#cb76-40" tabindex="-1"></a>          , <span class="at">quiet =</span> T</span>
<span id="cb76-41"><a href="salt-cabin-co.html#cb76-41" tabindex="-1"></a>        )</span>
<span id="cb76-42"><a href="salt-cabin-co.html#cb76-42" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb76-43"><a href="salt-cabin-co.html#cb76-43" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">bind_rows</span>()</span>
<span id="cb76-44"><a href="salt-cabin-co.html#cb76-44" tabindex="-1"></a>    , <span class="st">&quot;foresttype_rast&quot;</span> <span class="ot">=</span> terra<span class="sc">::</span><span class="fu">rast</span>( <span class="fu">file.path</span>(dir_temp, <span class="st">&quot;point_cloud_processing_delivery&quot;</span>, <span class="st">&quot;fia_foresttype_raster.tif&quot;</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb76-45"><a href="salt-cabin-co.html#cb76-45" tabindex="-1"></a>        terra<span class="sc">::</span><span class="fu">subst</span>(<span class="at">from =</span> foresttype_lookup<span class="sc">$</span>forest_type_group_code, <span class="at">to =</span> foresttype_lookup<span class="sc">$</span>forest_type_group)</span>
<span id="cb76-46"><a href="salt-cabin-co.html#cb76-46" tabindex="-1"></a>  )</span>
<span id="cb76-47"><a href="salt-cabin-co.html#cb76-47" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="cloud2trees-results-4" class="section level3 hasAnchor" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> <code>cloud2trees</code> Results<a href="salt-cabin-co.html#cloud2trees-results-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="fia-forest-type-group-4" class="section level4 hasAnchor" number="6.1.3.1">
<h4><span class="header-section-number">6.1.3.1</span> FIA Forest Type Group<a href="salt-cabin-co.html#fia-forest-type-group-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="salt-cabin-co.html#cb77-1" tabindex="-1"></a><span class="co"># load raster</span></span>
<span id="cb77-2"><a href="salt-cabin-co.html#cb77-2" tabindex="-1"></a><span class="fu">plt_rast_poly_fn</span>(</span>
<span id="cb77-3"><a href="salt-cabin-co.html#cb77-3" tabindex="-1"></a>  <span class="at">rast =</span> cloud2trees_ans<span class="sc">$</span>foresttype_rast</span>
<span id="cb77-4"><a href="salt-cabin-co.html#cb77-4" tabindex="-1"></a>  , <span class="at">poly =</span> aoi_sf</span>
<span id="cb77-5"><a href="salt-cabin-co.html#cb77-5" tabindex="-1"></a>  , <span class="at">title =</span> <span class="st">&quot;FIA forest type group&quot;</span></span>
<span id="cb77-6"><a href="salt-cabin-co.html#cb77-6" tabindex="-1"></a>  , <span class="at">crop =</span> T</span>
<span id="cb77-7"><a href="salt-cabin-co.html#cb77-7" tabindex="-1"></a>  , <span class="at">buff =</span> <span class="dv">22</span></span>
<span id="cb77-8"><a href="salt-cabin-co.html#cb77-8" tabindex="-1"></a>  , <span class="at">col =</span> <span class="st">&quot;navy&quot;</span></span>
<span id="cb77-9"><a href="salt-cabin-co.html#cb77-9" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb77-10"><a href="salt-cabin-co.html#cb77-10" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;turbo&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb77-11"><a href="salt-cabin-co.html#cb77-11" tabindex="-1"></a>  <span class="co"># harrypotter::scale_fill_hp_d(option = &quot;lunalovegood&quot;, alpha = 0.8) +</span></span>
<span id="cb77-12"><a href="salt-cabin-co.html#cb77-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - ALS&quot;</span>)) <span class="sc">+</span></span>
<span id="cb77-13"><a href="salt-cabin-co.html#cb77-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb77-14"><a href="salt-cabin-co.html#cb77-14" tabindex="-1"></a>    <span class="at">legend.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>, <span class="at">angle =</span> <span class="dv">0</span>)</span>
<span id="cb77-15"><a href="salt-cabin-co.html#cb77-15" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="dod_cloud2trees_demo_files/figure-html/unnamed-chunk-86-1.png" width="1008" /></p>
<p>distribution by forest type</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="salt-cabin-co.html#cb78-1" tabindex="-1"></a><span class="fu">foresttype_sum_fn</span>(<span class="at">crowns =</span> cloud2trees_ans<span class="sc">$</span>crowns_sf, <span class="at">aoi =</span> aoi_sf, <span class="at">unit =</span> aoi_sf<span class="sc">$</span>study_site_lab[<span class="dv">1</span>])</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-87">Table 6.1: </span>Count of trees by FIA Forest Type Group
</caption>
<thead>
<tr>
<th style="text-align:left;">
.
</th>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
# trees
</th>
<th style="text-align:left;">
% trees
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="7">
Salt Cabin (CO)
</td>
<td style="text-align:left;">
Ponderosa pine group
</td>
<td style="text-align:left;">
5,537
</td>
<td style="text-align:left;">
76.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
Aspen / birch group
</td>
<td style="text-align:left;">
1,194
</td>
<td style="text-align:left;">
16.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
Pinyon / juniper group
</td>
<td style="text-align:left;">
188
</td>
<td style="text-align:left;">
2.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
Douglas-fir group
</td>
<td style="text-align:left;">
153
</td>
<td style="text-align:left;">
2.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
Woodland hardwoods group
</td>
<td style="text-align:left;">
86
</td>
<td style="text-align:left;">
1.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
Fir / spruce / mountain hemlock group
</td>
<td style="text-align:left;">
35
</td>
<td style="text-align:left;">
0.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
Lodgepole pine group
</td>
<td style="text-align:left;">
31
</td>
<td style="text-align:left;">
0.4%
</td>
</tr>
</tbody>
</table>
</div>
<div id="dtm-4" class="section level4 hasAnchor" number="6.1.3.2">
<h4><span class="header-section-number">6.1.3.2</span> DTM<a href="salt-cabin-co.html#dtm-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="salt-cabin-co.html#cb79-1" tabindex="-1"></a><span class="fu">plt_rast_poly_fn</span>(</span>
<span id="cb79-2"><a href="salt-cabin-co.html#cb79-2" tabindex="-1"></a>  <span class="at">rast =</span> cloud2trees_ans<span class="sc">$</span>dtm_rast</span>
<span id="cb79-3"><a href="salt-cabin-co.html#cb79-3" tabindex="-1"></a>  , <span class="at">poly =</span> aoi_sf</span>
<span id="cb79-4"><a href="salt-cabin-co.html#cb79-4" tabindex="-1"></a>  , <span class="at">title =</span> <span class="st">&quot;DTM (m)&quot;</span></span>
<span id="cb79-5"><a href="salt-cabin-co.html#cb79-5" tabindex="-1"></a>  , <span class="at">crop =</span> T</span>
<span id="cb79-6"><a href="salt-cabin-co.html#cb79-6" tabindex="-1"></a>  , <span class="at">buff =</span> <span class="dv">22</span></span>
<span id="cb79-7"><a href="salt-cabin-co.html#cb79-7" tabindex="-1"></a>  , <span class="at">col =</span> <span class="st">&quot;navy&quot;</span></span>
<span id="cb79-8"><a href="salt-cabin-co.html#cb79-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb79-9"><a href="salt-cabin-co.html#cb79-9" tabindex="-1"></a>  harrypotter<span class="sc">::</span><span class="fu">scale_fill_hp</span>(</span>
<span id="cb79-10"><a href="salt-cabin-co.html#cb79-10" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">&quot;mischief&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy=</span><span class="dv">1</span>), <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">breaks_extended</span>(<span class="at">n=</span><span class="dv">6</span>)</span>
<span id="cb79-11"><a href="salt-cabin-co.html#cb79-11" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb79-12"><a href="salt-cabin-co.html#cb79-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - ALS&quot;</span>))</span></code></pre></div>
<p><img src="dod_cloud2trees_demo_files/figure-html/unnamed-chunk-88-1.png" width="1008" /></p>
</div>
<div id="chm-4" class="section level4 hasAnchor" number="6.1.3.3">
<h4><span class="header-section-number">6.1.3.3</span> CHM<a href="salt-cabin-co.html#chm-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>plot the CHM and we’ll also add the extracted trees in gray</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="salt-cabin-co.html#cb80-1" tabindex="-1"></a><span class="fu">plt_rast_poly_fn</span>(</span>
<span id="cb80-2"><a href="salt-cabin-co.html#cb80-2" tabindex="-1"></a>  <span class="at">rast =</span> cloud2trees_ans<span class="sc">$</span>chm_rast</span>
<span id="cb80-3"><a href="salt-cabin-co.html#cb80-3" tabindex="-1"></a>  , <span class="at">poly =</span> aoi_sf</span>
<span id="cb80-4"><a href="salt-cabin-co.html#cb80-4" tabindex="-1"></a>  , <span class="at">title =</span> <span class="st">&quot;CHM (m)&quot;</span></span>
<span id="cb80-5"><a href="salt-cabin-co.html#cb80-5" tabindex="-1"></a>  , <span class="at">crop =</span> T</span>
<span id="cb80-6"><a href="salt-cabin-co.html#cb80-6" tabindex="-1"></a>  , <span class="at">buff =</span> <span class="dv">22</span></span>
<span id="cb80-7"><a href="salt-cabin-co.html#cb80-7" tabindex="-1"></a>  , <span class="at">col =</span> <span class="st">&quot;navy&quot;</span></span>
<span id="cb80-8"><a href="salt-cabin-co.html#cb80-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb80-9"><a href="salt-cabin-co.html#cb80-9" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_viridis_c</span>(</span>
<span id="cb80-10"><a href="salt-cabin-co.html#cb80-10" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy=</span><span class="dv">1</span>), <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">breaks_extended</span>(<span class="at">n=</span><span class="dv">6</span>)</span>
<span id="cb80-11"><a href="salt-cabin-co.html#cb80-11" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb80-12"><a href="salt-cabin-co.html#cb80-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(</span>
<span id="cb80-13"><a href="salt-cabin-co.html#cb80-13" tabindex="-1"></a>    <span class="at">data =</span> cloud2trees_ans<span class="sc">$</span>crowns_sf <span class="sc">%&gt;%</span> </span>
<span id="cb80-14"><a href="salt-cabin-co.html#cb80-14" tabindex="-1"></a>      <span class="co"># dplyr::slice_sample(prop = 0.1) %&gt;% </span></span>
<span id="cb80-15"><a href="salt-cabin-co.html#cb80-15" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_intersection</span>(</span>
<span id="cb80-16"><a href="salt-cabin-co.html#cb80-16" tabindex="-1"></a>        aoi_sf <span class="sc">%&gt;%</span> sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(cloud2trees_ans<span class="sc">$</span>crowns_sf))</span>
<span id="cb80-17"><a href="salt-cabin-co.html#cb80-17" tabindex="-1"></a>      )</span>
<span id="cb80-18"><a href="salt-cabin-co.html#cb80-18" tabindex="-1"></a>    , <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.5</span></span>
<span id="cb80-19"><a href="salt-cabin-co.html#cb80-19" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb80-20"><a href="salt-cabin-co.html#cb80-20" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - ALS&quot;</span>))</span></code></pre></div>
<p><img src="dod_cloud2trees_demo_files/figure-html/unnamed-chunk-89-1.png" width="1008" /></p>
</div>
<div id="imagery-4" class="section level4 hasAnchor" number="6.1.3.4">
<h4><span class="header-section-number">6.1.3.4</span> Imagery<a href="salt-cabin-co.html#imagery-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>let’s check the tree extraction results (gray) on satellite imagery with a collection date that may not coincide with the point cloud collection date</p>
<p><em>we’ll sample the trees here so the output can be seen more clearly</em></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="salt-cabin-co.html#cb81-1" tabindex="-1"></a>plt_aoi_basemap <span class="ot">&lt;-</span> <span class="fu">my_ggmap_basemap</span>(</span>
<span id="cb81-2"><a href="salt-cabin-co.html#cb81-2" tabindex="-1"></a>  <span class="at">sf_data =</span> aoi_sf</span>
<span id="cb81-3"><a href="salt-cabin-co.html#cb81-3" tabindex="-1"></a>  , <span class="at">zoom_level =</span> <span class="dv">16</span></span>
<span id="cb81-4"><a href="salt-cabin-co.html#cb81-4" tabindex="-1"></a>  , <span class="at">buffer_box =</span> <span class="dv">22</span></span>
<span id="cb81-5"><a href="salt-cabin-co.html#cb81-5" tabindex="-1"></a>  , <span class="at">my_maptype =</span> <span class="st">&quot;satellite&quot;</span></span>
<span id="cb81-6"><a href="salt-cabin-co.html#cb81-6" tabindex="-1"></a>  , <span class="at">add_sf_data =</span> T</span>
<span id="cb81-7"><a href="salt-cabin-co.html#cb81-7" tabindex="-1"></a>  , <span class="at">outline_sf_data_col =</span> <span class="st">&quot;navy&quot;</span></span>
<span id="cb81-8"><a href="salt-cabin-co.html#cb81-8" tabindex="-1"></a>  , <span class="at">outline_lwd =</span> <span class="dv">1</span></span>
<span id="cb81-9"><a href="salt-cabin-co.html#cb81-9" tabindex="-1"></a>)</span>
<span id="cb81-10"><a href="salt-cabin-co.html#cb81-10" tabindex="-1"></a><span class="co"># add crowns</span></span>
<span id="cb81-11"><a href="salt-cabin-co.html#cb81-11" tabindex="-1"></a>plt_aoi_basemap <span class="sc">+</span></span>
<span id="cb81-12"><a href="salt-cabin-co.html#cb81-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(</span>
<span id="cb81-13"><a href="salt-cabin-co.html#cb81-13" tabindex="-1"></a>    <span class="at">data =</span> cloud2trees_ans<span class="sc">$</span>crowns_sf <span class="sc">%&gt;%</span> </span>
<span id="cb81-14"><a href="salt-cabin-co.html#cb81-14" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-15"><a href="salt-cabin-co.html#cb81-15" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_intersection</span>(</span>
<span id="cb81-16"><a href="salt-cabin-co.html#cb81-16" tabindex="-1"></a>        aoi_sf <span class="sc">%&gt;%</span> sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(cloud2trees_ans<span class="sc">$</span>crowns_sf))</span>
<span id="cb81-17"><a href="salt-cabin-co.html#cb81-17" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb81-18"><a href="salt-cabin-co.html#cb81-18" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_transform</span>(<span class="dv">4326</span>)</span>
<span id="cb81-19"><a href="salt-cabin-co.html#cb81-19" tabindex="-1"></a>    , <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;gray77&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.1</span></span>
<span id="cb81-20"><a href="salt-cabin-co.html#cb81-20" tabindex="-1"></a>    , <span class="at">inherit.aes =</span> F</span>
<span id="cb81-21"><a href="salt-cabin-co.html#cb81-21" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb81-22"><a href="salt-cabin-co.html#cb81-22" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - ALS&quot;</span>)) <span class="sc">+</span></span>
<span id="cb81-23"><a href="salt-cabin-co.html#cb81-23" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb81-24"><a href="salt-cabin-co.html#cb81-24" tabindex="-1"></a>    <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">0</span>))</span>
<span id="cb81-25"><a href="salt-cabin-co.html#cb81-25" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="dod_cloud2trees_demo_files/figure-html/unnamed-chunk-90-1.png" width="1008" /></p>
</div>
<div id="tree-attributes-spatial-4" class="section level4 hasAnchor" number="6.1.3.5">
<h4><span class="header-section-number">6.1.3.5</span> Tree Attributes Spatial<a href="salt-cabin-co.html#tree-attributes-spatial-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="salt-cabin-co.html#cb82-1" tabindex="-1"></a>plt_df_temp <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb82-2"><a href="salt-cabin-co.html#cb82-2" tabindex="-1"></a>  <span class="at">fill_var =</span> <span class="fu">c</span>(<span class="st">&quot;tree_height_m&quot;</span>, <span class="st">&quot;dbh_cm&quot;</span>, <span class="st">&quot;tree_cbh_m&quot;</span>, <span class="st">&quot;max_crown_diam_height_m&quot;</span>, <span class="st">&quot;landfire_crown_biomass_kg&quot;</span>)</span>
<span id="cb82-3"><a href="salt-cabin-co.html#cb82-3" tabindex="-1"></a>  , <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;Blues&quot;</span>, <span class="st">&quot;Oranges&quot;</span>, <span class="st">&quot;Greens&quot;</span>, <span class="st">&quot;Purples&quot;</span>, <span class="st">&quot;Reds&quot;</span>)</span>
<span id="cb82-4"><a href="salt-cabin-co.html#cb82-4" tabindex="-1"></a>  , <span class="at">title =</span> <span class="fu">c</span>(<span class="st">&quot;Height (m)&quot;</span>, <span class="st">&quot;DBH (cm)&quot;</span>, <span class="st">&quot;CBH (m)&quot;</span>, <span class="st">&quot;HMD (m)&quot;</span>, <span class="st">&quot;Crown</span><span class="sc">\n</span><span class="st">biomass (kg)&quot;</span>)</span>
<span id="cb82-5"><a href="salt-cabin-co.html#cb82-5" tabindex="-1"></a>)</span>
<span id="cb82-6"><a href="salt-cabin-co.html#cb82-6" tabindex="-1"></a></span>
<span id="cb82-7"><a href="salt-cabin-co.html#cb82-7" tabindex="-1"></a>plts_temp <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(plt_df_temp) <span class="sc">%&gt;%</span> </span>
<span id="cb82-8"><a href="salt-cabin-co.html#cb82-8" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(</span>
<span id="cb82-9"><a href="salt-cabin-co.html#cb82-9" tabindex="-1"></a>    \(x)</span>
<span id="cb82-10"><a href="salt-cabin-co.html#cb82-10" tabindex="-1"></a>    <span class="fu">plt_crown_attr_fn</span>(</span>
<span id="cb82-11"><a href="salt-cabin-co.html#cb82-11" tabindex="-1"></a>      <span class="at">crowns =</span> cloud2trees_ans<span class="sc">$</span>crowns_sf</span>
<span id="cb82-12"><a href="salt-cabin-co.html#cb82-12" tabindex="-1"></a>      , <span class="at">aoi =</span> aoi_sf</span>
<span id="cb82-13"><a href="salt-cabin-co.html#cb82-13" tabindex="-1"></a>      , <span class="at">lwd =</span> <span class="fl">0.6</span></span>
<span id="cb82-14"><a href="salt-cabin-co.html#cb82-14" tabindex="-1"></a>      , <span class="at">fill_var =</span> plt_df_temp<span class="sc">$</span>fill_var[x]</span>
<span id="cb82-15"><a href="salt-cabin-co.html#cb82-15" tabindex="-1"></a>      , <span class="at">palette =</span> plt_df_temp<span class="sc">$</span>palette[x]</span>
<span id="cb82-16"><a href="salt-cabin-co.html#cb82-16" tabindex="-1"></a>      , <span class="at">title =</span> plt_df_temp<span class="sc">$</span>title[x]</span>
<span id="cb82-17"><a href="salt-cabin-co.html#cb82-17" tabindex="-1"></a>    )  </span>
<span id="cb82-18"><a href="salt-cabin-co.html#cb82-18" tabindex="-1"></a>  )</span>
<span id="cb82-19"><a href="salt-cabin-co.html#cb82-19" tabindex="-1"></a><span class="co"># combine with patchwork</span></span>
<span id="cb82-20"><a href="salt-cabin-co.html#cb82-20" tabindex="-1"></a>patchwork<span class="sc">::</span><span class="fu">wrap_plots</span>(plts_temp, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb82-21"><a href="salt-cabin-co.html#cb82-21" tabindex="-1"></a>  patchwork<span class="sc">::</span><span class="fu">plot_annotation</span>(</span>
<span id="cb82-22"><a href="salt-cabin-co.html#cb82-22" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - ALS&quot;</span>)</span>
<span id="cb82-23"><a href="salt-cabin-co.html#cb82-23" tabindex="-1"></a>    <span class="co"># , subtitle = &quot;huh&quot;</span></span>
<span id="cb82-24"><a href="salt-cabin-co.html#cb82-24" tabindex="-1"></a>    <span class="co"># , caption = &quot;hey&quot;</span></span>
<span id="cb82-25"><a href="salt-cabin-co.html#cb82-25" tabindex="-1"></a>    , <span class="at">theme =</span> ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb82-26"><a href="salt-cabin-co.html#cb82-26" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>))</span>
<span id="cb82-27"><a href="salt-cabin-co.html#cb82-27" tabindex="-1"></a>    )</span>
<span id="cb82-28"><a href="salt-cabin-co.html#cb82-28" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="dod_cloud2trees_demo_files/figure-html/unnamed-chunk-91-1.png" width="1008" /></p>
</div>
<div id="tree-attributes-summary-stats-4" class="section level4 hasAnchor" number="6.1.3.6">
<h4><span class="header-section-number">6.1.3.6</span> Tree Attributes Summary Stats<a href="salt-cabin-co.html#tree-attributes-summary-stats-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="salt-cabin-co.html#cb83-1" tabindex="-1"></a><span class="fu">stats_sum_fn</span>(<span class="at">crowns =</span> cloud2trees_ans<span class="sc">$</span>crowns_sf, <span class="at">aoi =</span> aoi_sf, <span class="at">unit =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - ALS&quot;</span>))</span></code></pre></div>
<table class="table" style="font-size: 13px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-92">Table 6.2: </span>Summary statistics for selected metrics
</caption>
<thead>
<tr>
<th style="text-align:left;">
Unit Name
</th>
<th style="text-align:left;">
Metric
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Median
</th>
<th style="text-align:left;">
Std Dev
</th>
<th style="text-align:left;">
Range
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="6">
Salt Cabin (CO) - ALS<br>(7,224 trees)
</td>
<td style="text-align:left;">
Height (m)
</td>
<td style="text-align:left;">
7.7
</td>
<td style="text-align:left;">
6.6
</td>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:left;">
2.0—21.6
</td>
</tr>
<tr>
<td style="text-align:left;">
DBH (cm)
</td>
<td style="text-align:left;">
12.5
</td>
<td style="text-align:left;">
10.0
</td>
<td style="text-align:left;">
7.7
</td>
<td style="text-align:left;">
3.6—40.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Crown Base Ht. (m)
</td>
<td style="text-align:left;">
3.4
</td>
<td style="text-align:left;">
3.5
</td>
<td style="text-align:left;">
0.8
</td>
<td style="text-align:left;">
1.5—8.5
</td>
</tr>
<tr>
<td style="text-align:left;">
HMD (m)
</td>
<td style="text-align:left;">
3.3
</td>
<td style="text-align:left;">
3.3
</td>
<td style="text-align:left;">
1.0
</td>
<td style="text-align:left;">
0.2—10.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Cruz CBD<br>kg m<sup>-3</sup>
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA—NA
</td>
</tr>
<tr>
<td style="text-align:left;">
LANDFIRE CBD<br>kg m<sup>-3</sup>
</td>
<td style="text-align:left;">
0.094
</td>
<td style="text-align:left;">
0.088
</td>
<td style="text-align:left;">
0.070
</td>
<td style="text-align:left;">
0.009—1.190
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="sc_uas" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> UAS sfm Processing<a href="salt-cabin-co.html#sc_uas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="itd-tuning-5" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> ITD tuning<a href="salt-cabin-co.html#itd-tuning-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>put las files in a list</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="salt-cabin-co.html#cb84-1" tabindex="-1"></a><span class="co"># list of all las files</span></span>
<span id="cb84-2"><a href="salt-cabin-co.html#cb84-2" tabindex="-1"></a>las_flist_temp <span class="ot">&lt;-</span> aoi_las_ctg[[<span class="st">&quot;SaltCabin_uas_sfm_2024&quot;</span>]] <span class="sc">%&gt;%</span> </span>
<span id="cb84-3"><a href="salt-cabin-co.html#cb84-3" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">pluck</span>(<span class="st">&quot;data&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb84-4"><a href="salt-cabin-co.html#cb84-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(filename)</span></code></pre></div>
<p>run tuning</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="salt-cabin-co.html#cb85-1" tabindex="-1"></a><span class="co"># if there is an error with tuning...is it because there are no trees for a given ws_fn?</span></span>
<span id="cb85-2"><a href="salt-cabin-co.html#cb85-2" tabindex="-1"></a>    <span class="co"># Caused by error in `dplyr::group_by()`:</span></span>
<span id="cb85-3"><a href="salt-cabin-co.html#cb85-3" tabindex="-1"></a>    <span class="co"># ! Must group by variables found in `.data`.</span></span>
<span id="cb85-4"><a href="salt-cabin-co.html#cb85-4" tabindex="-1"></a>    <span class="co"># Column `ws_fn` is not found.</span></span>
<span id="cb85-5"><a href="salt-cabin-co.html#cb85-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(<span class="st">&quot;../data/itd_tuning_SaltCabin_uas_sfm.jpg&quot;</span>)){</span>
<span id="cb85-6"><a href="salt-cabin-co.html#cb85-6" tabindex="-1"></a>  <span class="co"># tuning</span></span>
<span id="cb85-7"><a href="salt-cabin-co.html#cb85-7" tabindex="-1"></a>  itd_tuning_ans <span class="ot">&lt;-</span> cloud2trees<span class="sc">::</span><span class="fu">itd_tuning</span>(</span>
<span id="cb85-8"><a href="salt-cabin-co.html#cb85-8" tabindex="-1"></a>      <span class="at">input_las_dir =</span> las_flist_temp</span>
<span id="cb85-9"><a href="salt-cabin-co.html#cb85-9" tabindex="-1"></a>      , <span class="at">n_samples =</span> <span class="dv">3</span></span>
<span id="cb85-10"><a href="salt-cabin-co.html#cb85-10" tabindex="-1"></a>      , <span class="at">ws_fn_list =</span> my_ws_functions</span>
<span id="cb85-11"><a href="salt-cabin-co.html#cb85-11" tabindex="-1"></a>      , <span class="at">chm_res_m =</span> <span class="fl">0.25</span></span>
<span id="cb85-12"><a href="salt-cabin-co.html#cb85-12" tabindex="-1"></a>    )</span>
<span id="cb85-13"><a href="salt-cabin-co.html#cb85-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb85-14"><a href="salt-cabin-co.html#cb85-14" tabindex="-1"></a>    <span class="st">&quot;../data/itd_tuning_SaltCabin_uas_sfm.jpg&quot;</span></span>
<span id="cb85-15"><a href="salt-cabin-co.html#cb85-15" tabindex="-1"></a>    , <span class="at">plot =</span> itd_tuning_ans<span class="sc">$</span>plot_samples</span>
<span id="cb85-16"><a href="salt-cabin-co.html#cb85-16" tabindex="-1"></a>    , <span class="at">dpi =</span> <span class="st">&quot;print&quot;</span></span>
<span id="cb85-17"><a href="salt-cabin-co.html#cb85-17" tabindex="-1"></a>    , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="dv">10</span></span>
<span id="cb85-18"><a href="salt-cabin-co.html#cb85-18" tabindex="-1"></a>  )</span>
<span id="cb85-19"><a href="salt-cabin-co.html#cb85-19" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="https://i.ibb.co/nMVQJFgJ/itd-tuning-Salt-Cabin-uas-sfm.jpg" width="100%" height="100%" style="display: block; margin: auto;" /></p>
<p>pick the best function for use in ITD</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="salt-cabin-co.html#cb86-1" tabindex="-1"></a><span class="co"># pick the best function for use in ITD</span></span>
<span id="cb86-2"><a href="salt-cabin-co.html#cb86-2" tabindex="-1"></a>best_ws_fn_temp <span class="ot">&lt;-</span> my_ws_functions<span class="sc">$</span>log_les_ccv_fn</span></code></pre></div>
</div>
<div id="cloud2trees-point-cloud-processing-5" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> <code>cloud2trees</code> point cloud processing<a href="salt-cabin-co.html#cloud2trees-point-cloud-processing-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="salt-cabin-co.html#cb87-1" tabindex="-1"></a>dir_temp <span class="ot">&lt;-</span> <span class="fu">file.path</span>(aoi_sf<span class="sc">$</span>fdir, <span class="st">&quot;uas_sfm_2024_processing&quot;</span>)</span>
<span id="cb87-2"><a href="salt-cabin-co.html#cb87-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">dir.exists</span>(dir_temp)){</span>
<span id="cb87-3"><a href="salt-cabin-co.html#cb87-3" tabindex="-1"></a>  <span class="fu">dir.create</span>(dir_temp)</span>
<span id="cb87-4"><a href="salt-cabin-co.html#cb87-4" tabindex="-1"></a><span class="co"># c2t</span></span>
<span id="cb87-5"><a href="salt-cabin-co.html#cb87-5" tabindex="-1"></a>  cloud2trees_ans <span class="ot">&lt;-</span> cloud2trees<span class="sc">::</span><span class="fu">cloud2trees</span>(</span>
<span id="cb87-6"><a href="salt-cabin-co.html#cb87-6" tabindex="-1"></a>    <span class="at">input_las_dir =</span> las_flist_temp</span>
<span id="cb87-7"><a href="salt-cabin-co.html#cb87-7" tabindex="-1"></a>    , <span class="at">output_dir =</span> dir_temp</span>
<span id="cb87-8"><a href="salt-cabin-co.html#cb87-8" tabindex="-1"></a>    , <span class="at">ws =</span> best_ws_fn_temp</span>
<span id="cb87-9"><a href="salt-cabin-co.html#cb87-9" tabindex="-1"></a>    , <span class="at">dtm_res_m =</span> <span class="dv">1</span></span>
<span id="cb87-10"><a href="salt-cabin-co.html#cb87-10" tabindex="-1"></a>    , <span class="at">chm_res_m =</span> <span class="fl">0.25</span></span>
<span id="cb87-11"><a href="salt-cabin-co.html#cb87-11" tabindex="-1"></a>    , <span class="at">estimate_tree_dbh =</span> T</span>
<span id="cb87-12"><a href="salt-cabin-co.html#cb87-12" tabindex="-1"></a>    , <span class="at">estimate_tree_type =</span> T</span>
<span id="cb87-13"><a href="salt-cabin-co.html#cb87-13" tabindex="-1"></a>    <span class="co"># hmd</span></span>
<span id="cb87-14"><a href="salt-cabin-co.html#cb87-14" tabindex="-1"></a>    , <span class="at">estimate_tree_hmd =</span> T</span>
<span id="cb87-15"><a href="salt-cabin-co.html#cb87-15" tabindex="-1"></a>    , <span class="at">hmd_tree_sample_prop =</span> <span class="fl">0.5</span></span>
<span id="cb87-16"><a href="salt-cabin-co.html#cb87-16" tabindex="-1"></a>    , <span class="at">hmd_estimate_missing_hmd =</span> T</span>
<span id="cb87-17"><a href="salt-cabin-co.html#cb87-17" tabindex="-1"></a>    <span class="co"># biomass</span></span>
<span id="cb87-18"><a href="salt-cabin-co.html#cb87-18" tabindex="-1"></a>    , <span class="at">estimate_biomass_method =</span> <span class="fu">c</span>(<span class="st">&quot;landfire&quot;</span>,<span class="st">&quot;cruz&quot;</span>)</span>
<span id="cb87-19"><a href="salt-cabin-co.html#cb87-19" tabindex="-1"></a>    <span class="co"># cbh</span></span>
<span id="cb87-20"><a href="salt-cabin-co.html#cb87-20" tabindex="-1"></a>    , <span class="at">estimate_tree_cbh =</span> T</span>
<span id="cb87-21"><a href="salt-cabin-co.html#cb87-21" tabindex="-1"></a>    , <span class="at">cbh_tree_sample_prop =</span> <span class="fl">0.5</span></span>
<span id="cb87-22"><a href="salt-cabin-co.html#cb87-22" tabindex="-1"></a>    , <span class="at">cbh_estimate_missing_cbh =</span> T</span>
<span id="cb87-23"><a href="salt-cabin-co.html#cb87-23" tabindex="-1"></a>  )</span>
<span id="cb87-24"><a href="salt-cabin-co.html#cb87-24" tabindex="-1"></a>  <span class="co"># add foresttype</span></span>
<span id="cb87-25"><a href="salt-cabin-co.html#cb87-25" tabindex="-1"></a>  cloud2trees_ans<span class="sc">$</span>foresttype_rast <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>( <span class="fu">file.path</span>(dir_temp, <span class="st">&quot;point_cloud_processing_delivery&quot;</span>, <span class="st">&quot;fia_foresttype_raster.tif&quot;</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb87-26"><a href="salt-cabin-co.html#cb87-26" tabindex="-1"></a>    terra<span class="sc">::</span><span class="fu">subst</span>(<span class="at">from =</span> foresttype_lookup<span class="sc">$</span>forest_type_group_code, <span class="at">to =</span> foresttype_lookup<span class="sc">$</span>forest_type_group)</span>
<span id="cb87-27"><a href="salt-cabin-co.html#cb87-27" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb87-28"><a href="salt-cabin-co.html#cb87-28" tabindex="-1"></a>  cloud2trees_ans <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb87-29"><a href="salt-cabin-co.html#cb87-29" tabindex="-1"></a>    <span class="st">&quot;dtm_rast&quot;</span> <span class="ot">=</span> terra<span class="sc">::</span><span class="fu">rast</span>( <span class="fu">file.path</span>(dir_temp, <span class="st">&quot;point_cloud_processing_delivery&quot;</span>, <span class="st">&quot;dtm_1m.tif&quot;</span>) )</span>
<span id="cb87-30"><a href="salt-cabin-co.html#cb87-30" tabindex="-1"></a>    , <span class="st">&quot;chm_rast&quot;</span> <span class="ot">=</span> terra<span class="sc">::</span><span class="fu">rast</span>( <span class="fu">file.path</span>(dir_temp, <span class="st">&quot;point_cloud_processing_delivery&quot;</span>, <span class="st">&quot;chm_0.25m.tif&quot;</span>) )</span>
<span id="cb87-31"><a href="salt-cabin-co.html#cb87-31" tabindex="-1"></a>    , <span class="st">&quot;crowns_sf&quot;</span> <span class="ot">=</span> <span class="fu">list.files</span>(</span>
<span id="cb87-32"><a href="salt-cabin-co.html#cb87-32" tabindex="-1"></a>        <span class="fu">file.path</span>(dir_temp, <span class="st">&quot;point_cloud_processing_delivery&quot;</span>)</span>
<span id="cb87-33"><a href="salt-cabin-co.html#cb87-33" tabindex="-1"></a>        , <span class="at">pattern =</span> <span class="st">&quot;final_detected_crowns.*</span><span class="sc">\\</span><span class="st">.gpkg$&quot;</span></span>
<span id="cb87-34"><a href="salt-cabin-co.html#cb87-34" tabindex="-1"></a>        , <span class="at">full.names =</span> T</span>
<span id="cb87-35"><a href="salt-cabin-co.html#cb87-35" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb87-36"><a href="salt-cabin-co.html#cb87-36" tabindex="-1"></a>      <span class="fu">normalizePath</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb87-37"><a href="salt-cabin-co.html#cb87-37" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">map</span>(\(x)</span>
<span id="cb87-38"><a href="salt-cabin-co.html#cb87-38" tabindex="-1"></a>        sf<span class="sc">::</span><span class="fu">st_read</span>(</span>
<span id="cb87-39"><a href="salt-cabin-co.html#cb87-39" tabindex="-1"></a>          <span class="at">dsn =</span> x</span>
<span id="cb87-40"><a href="salt-cabin-co.html#cb87-40" tabindex="-1"></a>          , <span class="at">quiet =</span> T</span>
<span id="cb87-41"><a href="salt-cabin-co.html#cb87-41" tabindex="-1"></a>        )</span>
<span id="cb87-42"><a href="salt-cabin-co.html#cb87-42" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb87-43"><a href="salt-cabin-co.html#cb87-43" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">bind_rows</span>()</span>
<span id="cb87-44"><a href="salt-cabin-co.html#cb87-44" tabindex="-1"></a>    , <span class="st">&quot;foresttype_rast&quot;</span> <span class="ot">=</span> terra<span class="sc">::</span><span class="fu">rast</span>( <span class="fu">file.path</span>(dir_temp, <span class="st">&quot;point_cloud_processing_delivery&quot;</span>, <span class="st">&quot;fia_foresttype_raster.tif&quot;</span>) ) <span class="sc">%&gt;%</span> </span>
<span id="cb87-45"><a href="salt-cabin-co.html#cb87-45" tabindex="-1"></a>        terra<span class="sc">::</span><span class="fu">subst</span>(<span class="at">from =</span> foresttype_lookup<span class="sc">$</span>forest_type_group_code, <span class="at">to =</span> foresttype_lookup<span class="sc">$</span>forest_type_group)</span>
<span id="cb87-46"><a href="salt-cabin-co.html#cb87-46" tabindex="-1"></a>  )</span>
<span id="cb87-47"><a href="salt-cabin-co.html#cb87-47" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="cloud2trees-results-5" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> <code>cloud2trees</code> Results<a href="salt-cabin-co.html#cloud2trees-results-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="fia-forest-type-group-5" class="section level4 hasAnchor" number="6.2.3.1">
<h4><span class="header-section-number">6.2.3.1</span> FIA Forest Type Group<a href="salt-cabin-co.html#fia-forest-type-group-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="salt-cabin-co.html#cb88-1" tabindex="-1"></a><span class="co"># load raster</span></span>
<span id="cb88-2"><a href="salt-cabin-co.html#cb88-2" tabindex="-1"></a><span class="fu">plt_rast_poly_fn</span>(</span>
<span id="cb88-3"><a href="salt-cabin-co.html#cb88-3" tabindex="-1"></a>  <span class="at">rast =</span> cloud2trees_ans<span class="sc">$</span>foresttype_rast</span>
<span id="cb88-4"><a href="salt-cabin-co.html#cb88-4" tabindex="-1"></a>  , <span class="at">poly =</span> aoi_sf</span>
<span id="cb88-5"><a href="salt-cabin-co.html#cb88-5" tabindex="-1"></a>  , <span class="at">title =</span> <span class="st">&quot;FIA forest type group&quot;</span></span>
<span id="cb88-6"><a href="salt-cabin-co.html#cb88-6" tabindex="-1"></a>  , <span class="at">crop =</span> T</span>
<span id="cb88-7"><a href="salt-cabin-co.html#cb88-7" tabindex="-1"></a>  , <span class="at">buff =</span> <span class="dv">22</span></span>
<span id="cb88-8"><a href="salt-cabin-co.html#cb88-8" tabindex="-1"></a>  , <span class="at">col =</span> <span class="st">&quot;navy&quot;</span></span>
<span id="cb88-9"><a href="salt-cabin-co.html#cb88-9" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb88-10"><a href="salt-cabin-co.html#cb88-10" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;turbo&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb88-11"><a href="salt-cabin-co.html#cb88-11" tabindex="-1"></a>  <span class="co"># harrypotter::scale_fill_hp_d(option = &quot;lunalovegood&quot;, alpha = 0.8) +</span></span>
<span id="cb88-12"><a href="salt-cabin-co.html#cb88-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - UAS SfM&quot;</span>)) <span class="sc">+</span></span>
<span id="cb88-13"><a href="salt-cabin-co.html#cb88-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb88-14"><a href="salt-cabin-co.html#cb88-14" tabindex="-1"></a>    <span class="at">legend.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>, <span class="at">angle =</span> <span class="dv">0</span>)</span>
<span id="cb88-15"><a href="salt-cabin-co.html#cb88-15" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="dod_cloud2trees_demo_files/figure-html/unnamed-chunk-99-1.png" width="1008" /></p>
<p>distribution by forest type</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="salt-cabin-co.html#cb89-1" tabindex="-1"></a><span class="fu">foresttype_sum_fn</span>(<span class="at">crowns =</span> cloud2trees_ans<span class="sc">$</span>crowns_sf, <span class="at">aoi =</span> aoi_sf, <span class="at">unit =</span> aoi_sf<span class="sc">$</span>study_site_lab[<span class="dv">1</span>])</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-100">Table 6.3: </span>Count of trees by FIA Forest Type Group
</caption>
<thead>
<tr>
<th style="text-align:left;">
.
</th>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
# trees
</th>
<th style="text-align:left;">
% trees
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="7">
Salt Cabin (CO)
</td>
<td style="text-align:left;">
Ponderosa pine group
</td>
<td style="text-align:left;">
2,728
</td>
<td style="text-align:left;">
76.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
Aspen / birch group
</td>
<td style="text-align:left;">
619
</td>
<td style="text-align:left;">
17.3%
</td>
</tr>
<tr>
<td style="text-align:left;">
Pinyon / juniper group
</td>
<td style="text-align:left;">
80
</td>
<td style="text-align:left;">
2.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
Douglas-fir group
</td>
<td style="text-align:left;">
67
</td>
<td style="text-align:left;">
1.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
Woodland hardwoods group
</td>
<td style="text-align:left;">
39
</td>
<td style="text-align:left;">
1.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
Lodgepole pine group
</td>
<td style="text-align:left;">
21
</td>
<td style="text-align:left;">
0.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
Fir / spruce / mountain hemlock group
</td>
<td style="text-align:left;">
17
</td>
<td style="text-align:left;">
0.5%
</td>
</tr>
</tbody>
</table>
</div>
<div id="dtm-5" class="section level4 hasAnchor" number="6.2.3.2">
<h4><span class="header-section-number">6.2.3.2</span> DTM<a href="salt-cabin-co.html#dtm-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="salt-cabin-co.html#cb90-1" tabindex="-1"></a><span class="fu">plt_rast_poly_fn</span>(</span>
<span id="cb90-2"><a href="salt-cabin-co.html#cb90-2" tabindex="-1"></a>  <span class="at">rast =</span> cloud2trees_ans<span class="sc">$</span>dtm_rast</span>
<span id="cb90-3"><a href="salt-cabin-co.html#cb90-3" tabindex="-1"></a>  , <span class="at">poly =</span> aoi_sf</span>
<span id="cb90-4"><a href="salt-cabin-co.html#cb90-4" tabindex="-1"></a>  , <span class="at">title =</span> <span class="st">&quot;DTM (m)&quot;</span></span>
<span id="cb90-5"><a href="salt-cabin-co.html#cb90-5" tabindex="-1"></a>  , <span class="at">crop =</span> T</span>
<span id="cb90-6"><a href="salt-cabin-co.html#cb90-6" tabindex="-1"></a>  , <span class="at">buff =</span> <span class="dv">22</span></span>
<span id="cb90-7"><a href="salt-cabin-co.html#cb90-7" tabindex="-1"></a>  , <span class="at">col =</span> <span class="st">&quot;navy&quot;</span></span>
<span id="cb90-8"><a href="salt-cabin-co.html#cb90-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb90-9"><a href="salt-cabin-co.html#cb90-9" tabindex="-1"></a>  harrypotter<span class="sc">::</span><span class="fu">scale_fill_hp</span>(</span>
<span id="cb90-10"><a href="salt-cabin-co.html#cb90-10" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">&quot;mischief&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy=</span><span class="dv">1</span>), <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">breaks_extended</span>(<span class="at">n=</span><span class="dv">6</span>)</span>
<span id="cb90-11"><a href="salt-cabin-co.html#cb90-11" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb90-12"><a href="salt-cabin-co.html#cb90-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - UAS SfM&quot;</span>))</span></code></pre></div>
<p><img src="dod_cloud2trees_demo_files/figure-html/unnamed-chunk-101-1.png" width="1008" /></p>
</div>
<div id="chm-5" class="section level4 hasAnchor" number="6.2.3.3">
<h4><span class="header-section-number">6.2.3.3</span> CHM<a href="salt-cabin-co.html#chm-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>plot the CHM and we’ll also add the extracted trees in gray</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="salt-cabin-co.html#cb91-1" tabindex="-1"></a><span class="fu">plt_rast_poly_fn</span>(</span>
<span id="cb91-2"><a href="salt-cabin-co.html#cb91-2" tabindex="-1"></a>  <span class="at">rast =</span> cloud2trees_ans<span class="sc">$</span>chm_rast</span>
<span id="cb91-3"><a href="salt-cabin-co.html#cb91-3" tabindex="-1"></a>  , <span class="at">poly =</span> aoi_sf</span>
<span id="cb91-4"><a href="salt-cabin-co.html#cb91-4" tabindex="-1"></a>  , <span class="at">title =</span> <span class="st">&quot;CHM (m)&quot;</span></span>
<span id="cb91-5"><a href="salt-cabin-co.html#cb91-5" tabindex="-1"></a>  , <span class="at">crop =</span> T</span>
<span id="cb91-6"><a href="salt-cabin-co.html#cb91-6" tabindex="-1"></a>  , <span class="at">buff =</span> <span class="dv">22</span></span>
<span id="cb91-7"><a href="salt-cabin-co.html#cb91-7" tabindex="-1"></a>  , <span class="at">col =</span> <span class="st">&quot;navy&quot;</span></span>
<span id="cb91-8"><a href="salt-cabin-co.html#cb91-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb91-9"><a href="salt-cabin-co.html#cb91-9" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_viridis_c</span>(</span>
<span id="cb91-10"><a href="salt-cabin-co.html#cb91-10" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy=</span><span class="dv">1</span>), <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">breaks_extended</span>(<span class="at">n=</span><span class="dv">6</span>)</span>
<span id="cb91-11"><a href="salt-cabin-co.html#cb91-11" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb91-12"><a href="salt-cabin-co.html#cb91-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(</span>
<span id="cb91-13"><a href="salt-cabin-co.html#cb91-13" tabindex="-1"></a>    <span class="at">data =</span> cloud2trees_ans<span class="sc">$</span>crowns_sf <span class="sc">%&gt;%</span> </span>
<span id="cb91-14"><a href="salt-cabin-co.html#cb91-14" tabindex="-1"></a>      <span class="co"># dplyr::slice_sample(prop = 0.1) %&gt;% </span></span>
<span id="cb91-15"><a href="salt-cabin-co.html#cb91-15" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_intersection</span>(</span>
<span id="cb91-16"><a href="salt-cabin-co.html#cb91-16" tabindex="-1"></a>        aoi_sf <span class="sc">%&gt;%</span> sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(cloud2trees_ans<span class="sc">$</span>crowns_sf))</span>
<span id="cb91-17"><a href="salt-cabin-co.html#cb91-17" tabindex="-1"></a>      )</span>
<span id="cb91-18"><a href="salt-cabin-co.html#cb91-18" tabindex="-1"></a>    , <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.5</span></span>
<span id="cb91-19"><a href="salt-cabin-co.html#cb91-19" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb91-20"><a href="salt-cabin-co.html#cb91-20" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - UAS SfM&quot;</span>))</span></code></pre></div>
<p><img src="dod_cloud2trees_demo_files/figure-html/unnamed-chunk-102-1.png" width="1008" /></p>
</div>
<div id="imagery-5" class="section level4 hasAnchor" number="6.2.3.4">
<h4><span class="header-section-number">6.2.3.4</span> Imagery<a href="salt-cabin-co.html#imagery-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>let’s check the tree extraction results (gray) on satellite imagery with a collection date that may not coincide with the point cloud collection date</p>
<p><em>we’ll sample the trees here so the output can be seen more clearly</em></p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="salt-cabin-co.html#cb92-1" tabindex="-1"></a><span class="co"># add crowns</span></span>
<span id="cb92-2"><a href="salt-cabin-co.html#cb92-2" tabindex="-1"></a>plt_aoi_basemap <span class="sc">+</span></span>
<span id="cb92-3"><a href="salt-cabin-co.html#cb92-3" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(</span>
<span id="cb92-4"><a href="salt-cabin-co.html#cb92-4" tabindex="-1"></a>    <span class="at">data =</span> cloud2trees_ans<span class="sc">$</span>crowns_sf <span class="sc">%&gt;%</span> </span>
<span id="cb92-5"><a href="salt-cabin-co.html#cb92-5" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb92-6"><a href="salt-cabin-co.html#cb92-6" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_intersection</span>(</span>
<span id="cb92-7"><a href="salt-cabin-co.html#cb92-7" tabindex="-1"></a>        aoi_sf <span class="sc">%&gt;%</span> sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(cloud2trees_ans<span class="sc">$</span>crowns_sf))</span>
<span id="cb92-8"><a href="salt-cabin-co.html#cb92-8" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb92-9"><a href="salt-cabin-co.html#cb92-9" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_transform</span>(<span class="dv">4326</span>)</span>
<span id="cb92-10"><a href="salt-cabin-co.html#cb92-10" tabindex="-1"></a>    , <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;gray77&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.1</span></span>
<span id="cb92-11"><a href="salt-cabin-co.html#cb92-11" tabindex="-1"></a>    , <span class="at">inherit.aes =</span> F</span>
<span id="cb92-12"><a href="salt-cabin-co.html#cb92-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb92-13"><a href="salt-cabin-co.html#cb92-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - UAS SfM&quot;</span>)) <span class="sc">+</span></span>
<span id="cb92-14"><a href="salt-cabin-co.html#cb92-14" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb92-15"><a href="salt-cabin-co.html#cb92-15" tabindex="-1"></a>    <span class="at">plot.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">0</span>))</span>
<span id="cb92-16"><a href="salt-cabin-co.html#cb92-16" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="dod_cloud2trees_demo_files/figure-html/unnamed-chunk-103-1.png" width="1008" /></p>
</div>
<div id="tree-attributes-spatial-5" class="section level4 hasAnchor" number="6.2.3.5">
<h4><span class="header-section-number">6.2.3.5</span> Tree Attributes Spatial<a href="salt-cabin-co.html#tree-attributes-spatial-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="salt-cabin-co.html#cb93-1" tabindex="-1"></a>plt_df_temp <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb93-2"><a href="salt-cabin-co.html#cb93-2" tabindex="-1"></a>  <span class="at">fill_var =</span> <span class="fu">c</span>(<span class="st">&quot;tree_height_m&quot;</span>, <span class="st">&quot;dbh_cm&quot;</span>, <span class="st">&quot;tree_cbh_m&quot;</span>, <span class="st">&quot;max_crown_diam_height_m&quot;</span>, <span class="st">&quot;landfire_crown_biomass_kg&quot;</span>)</span>
<span id="cb93-3"><a href="salt-cabin-co.html#cb93-3" tabindex="-1"></a>  , <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;Blues&quot;</span>, <span class="st">&quot;Oranges&quot;</span>, <span class="st">&quot;Greens&quot;</span>, <span class="st">&quot;Purples&quot;</span>, <span class="st">&quot;Reds&quot;</span>)</span>
<span id="cb93-4"><a href="salt-cabin-co.html#cb93-4" tabindex="-1"></a>  , <span class="at">title =</span> <span class="fu">c</span>(<span class="st">&quot;Height (m)&quot;</span>, <span class="st">&quot;DBH (cm)&quot;</span>, <span class="st">&quot;CBH (m)&quot;</span>, <span class="st">&quot;HMD (m)&quot;</span>, <span class="st">&quot;Crown</span><span class="sc">\n</span><span class="st">biomass (kg)&quot;</span>)</span>
<span id="cb93-5"><a href="salt-cabin-co.html#cb93-5" tabindex="-1"></a>)</span>
<span id="cb93-6"><a href="salt-cabin-co.html#cb93-6" tabindex="-1"></a></span>
<span id="cb93-7"><a href="salt-cabin-co.html#cb93-7" tabindex="-1"></a>plts_temp <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(plt_df_temp) <span class="sc">%&gt;%</span> </span>
<span id="cb93-8"><a href="salt-cabin-co.html#cb93-8" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(</span>
<span id="cb93-9"><a href="salt-cabin-co.html#cb93-9" tabindex="-1"></a>    \(x)</span>
<span id="cb93-10"><a href="salt-cabin-co.html#cb93-10" tabindex="-1"></a>    <span class="fu">plt_crown_attr_fn</span>(</span>
<span id="cb93-11"><a href="salt-cabin-co.html#cb93-11" tabindex="-1"></a>      <span class="at">crowns =</span> cloud2trees_ans<span class="sc">$</span>crowns_sf</span>
<span id="cb93-12"><a href="salt-cabin-co.html#cb93-12" tabindex="-1"></a>      , <span class="at">aoi =</span> aoi_sf</span>
<span id="cb93-13"><a href="salt-cabin-co.html#cb93-13" tabindex="-1"></a>      , <span class="at">lwd =</span> <span class="fl">0.6</span></span>
<span id="cb93-14"><a href="salt-cabin-co.html#cb93-14" tabindex="-1"></a>      , <span class="at">fill_var =</span> plt_df_temp<span class="sc">$</span>fill_var[x]</span>
<span id="cb93-15"><a href="salt-cabin-co.html#cb93-15" tabindex="-1"></a>      , <span class="at">palette =</span> plt_df_temp<span class="sc">$</span>palette[x]</span>
<span id="cb93-16"><a href="salt-cabin-co.html#cb93-16" tabindex="-1"></a>      , <span class="at">title =</span> plt_df_temp<span class="sc">$</span>title[x]</span>
<span id="cb93-17"><a href="salt-cabin-co.html#cb93-17" tabindex="-1"></a>    )  </span>
<span id="cb93-18"><a href="salt-cabin-co.html#cb93-18" tabindex="-1"></a>  )</span>
<span id="cb93-19"><a href="salt-cabin-co.html#cb93-19" tabindex="-1"></a><span class="co"># combine with patchwork</span></span>
<span id="cb93-20"><a href="salt-cabin-co.html#cb93-20" tabindex="-1"></a>patchwork<span class="sc">::</span><span class="fu">wrap_plots</span>(plts_temp, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb93-21"><a href="salt-cabin-co.html#cb93-21" tabindex="-1"></a>  patchwork<span class="sc">::</span><span class="fu">plot_annotation</span>(</span>
<span id="cb93-22"><a href="salt-cabin-co.html#cb93-22" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - UAS SfM&quot;</span>)</span>
<span id="cb93-23"><a href="salt-cabin-co.html#cb93-23" tabindex="-1"></a>    <span class="co"># , subtitle = &quot;huh&quot;</span></span>
<span id="cb93-24"><a href="salt-cabin-co.html#cb93-24" tabindex="-1"></a>    <span class="co"># , caption = &quot;hey&quot;</span></span>
<span id="cb93-25"><a href="salt-cabin-co.html#cb93-25" tabindex="-1"></a>    , <span class="at">theme =</span> ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb93-26"><a href="salt-cabin-co.html#cb93-26" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>))</span>
<span id="cb93-27"><a href="salt-cabin-co.html#cb93-27" tabindex="-1"></a>    )</span>
<span id="cb93-28"><a href="salt-cabin-co.html#cb93-28" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="dod_cloud2trees_demo_files/figure-html/unnamed-chunk-104-1.png" width="1008" /></p>
</div>
<div id="tree-attributes-summary-stats-5" class="section level4 hasAnchor" number="6.2.3.6">
<h4><span class="header-section-number">6.2.3.6</span> Tree Attributes Summary Stats<a href="salt-cabin-co.html#tree-attributes-summary-stats-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="salt-cabin-co.html#cb94-1" tabindex="-1"></a><span class="fu">stats_sum_fn</span>(<span class="at">crowns =</span> cloud2trees_ans<span class="sc">$</span>crowns_sf, <span class="at">aoi =</span> aoi_sf, <span class="at">unit =</span> <span class="fu">paste0</span>(aoi_sf<span class="sc">$</span>study_site_lab, <span class="st">&quot; - UAS SfM&quot;</span>))</span></code></pre></div>
<table class="table" style="font-size: 13px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-105">Table 6.4: </span>Summary statistics for selected metrics
</caption>
<thead>
<tr>
<th style="text-align:left;">
Unit Name
</th>
<th style="text-align:left;">
Metric
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Median
</th>
<th style="text-align:left;">
Std Dev
</th>
<th style="text-align:left;">
Range
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="6">
Salt Cabin (CO) - UAS SfM<br>(3,571 trees)
</td>
<td style="text-align:left;">
Height (m)
</td>
<td style="text-align:left;">
9.2
</td>
<td style="text-align:left;">
8.3
</td>
<td style="text-align:left;">
4.9
</td>
<td style="text-align:left;">
2.0—22.5
</td>
</tr>
<tr>
<td style="text-align:left;">
DBH (cm)
</td>
<td style="text-align:left;">
16.3
</td>
<td style="text-align:left;">
13.5
</td>
<td style="text-align:left;">
10.0
</td>
<td style="text-align:left;">
3.7—48.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Crown Base Ht. (m)
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
4.3
</td>
<td style="text-align:left;">
1.6
</td>
<td style="text-align:left;">
1.5—12.5
</td>
</tr>
<tr>
<td style="text-align:left;">
HMD (m)
</td>
<td style="text-align:left;">
3.7
</td>
<td style="text-align:left;">
3.6
</td>
<td style="text-align:left;">
1.9
</td>
<td style="text-align:left;">
0.1—14.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Cruz CBD<br>kg m<sup>-3</sup>
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA—NA
</td>
</tr>
<tr>
<td style="text-align:left;">
LANDFIRE CBD<br>kg m<sup>-3</sup>
</td>
<td style="text-align:left;">
0.113
</td>
<td style="text-align:left;">
0.108
</td>
<td style="text-align:left;">
0.078
</td>
<td style="text-align:left;">
0.016—1.307
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="fort-stewart-ga.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="cedar-bridge-nj.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

</body>

</html>
